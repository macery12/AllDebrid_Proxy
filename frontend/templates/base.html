<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}AllDebrid Proxy â€” Modern UI{% endblock %}</title>
  <style>
    :root { 
      --bg:#0a0e1a; 
      --bg-secondary:#0f1420;
      --card:#141b2e; 
      --card-hover:#1a2340;
      --muted:#8aa0c7; 
      --text:#e8f0ff; 
      --accent:#6366f1; 
      --accent-hover:#7c3aed;
      --accent-2:#22c55e; 
      --danger:#ef4444; 
      --warn:#f59e0b;
      --border:#1e2a50;
      --border-light:#2a3a69;
    }
    *{box-sizing:border-box; margin:0; padding:0}
    body{
      background:linear-gradient(135deg, var(--bg) 0%, var(--bg-secondary) 100%);
      color:var(--text);
      font:15px/1.6 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      min-height:100vh;
    }
    a{color:var(--accent); text-decoration:none; transition: color 0.2s ease}
    a:hover{color:var(--accent-hover)}
    
    /* Header */
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:16px 24px;
      background:rgba(20, 27, 46, 0.95);
      border-bottom:1px solid var(--border);
      backdrop-filter:blur(10px);
      position:sticky;
      top:0;
      z-index:100;
      box-shadow:0 4px 6px rgba(0,0,0,0.1);
    }
    header h1{
      font-size:20px;
      font-weight:700;
      background:linear-gradient(135deg, var(--accent), var(--accent-2));
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
    }
    header nav{
      display:flex;
      gap:12px;
      align-items:center;
    }
    header nav a{
      padding:8px 16px;
      border-radius:8px;
      background:transparent;
      border:1px solid var(--border);
      color:var(--text);
      font-size:14px;
      transition:all 0.2s ease;
    }
    header nav a:hover{
      background:var(--card);
      border-color:var(--accent);
      transform:translateY(-1px);
    }
    
    /* Main content */
    .wrap{
      max-width:1200px;
      margin:24px auto;
      padding:0 20px;
    }
    
    /* Cards */
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:16px;
      padding:20px;
      margin-bottom:20px;
      box-shadow:0 4px 6px rgba(0,0,0,0.1);
      transition:all 0.3s ease;
    }
    .card:hover{
      box-shadow:0 8px 12px rgba(0,0,0,0.15);
      border-color:var(--border-light);
    }
    .card h2{
      font-size:18px;
      margin:0 0 12px;
      font-weight:600;
    }
    
    /* Forms */
    label{
      display:block;
      font-weight:600;
      color:var(--muted);
      margin:14px 0 8px;
      font-size:14px;
    }
    input[type=text], 
    input[type=password], 
    textarea, 
    select{
      width:100%;
      padding:12px 14px;
      background:var(--bg-secondary);
      border:1px solid var(--border);
      border-radius:10px;
      color:var(--text);
      font-size:15px;
      transition:all 0.2s ease;
    }
    input[type=text]:focus, 
    input[type=password]:focus,
    textarea:focus, 
    select:focus{
      outline:none;
      border-color:var(--accent);
      box-shadow:0 0 0 3px rgba(99, 102, 241, 0.1);
    }
    textarea{
      min-height:100px;
      resize:vertical;
      font-family:inherit;
    }
    
    /* Buttons */
    .row{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }
    .row > *{flex:1}
    .btn{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding:10px 16px;
      border-radius:10px;
      border:1px solid var(--border);
      background:var(--bg-secondary);
      color:var(--text);
      cursor:pointer;
      text-decoration:none;
      font-size:14px;
      font-weight:500;
      transition:all 0.2s ease;
      white-space:nowrap;
    }
    .btn:hover{
      transform:translateY(-2px);
      box-shadow:0 4px 8px rgba(0,0,0,0.2);
      border-color:var(--border-light);
    }
    .btn.primary{
      background:linear-gradient(135deg, var(--accent), var(--accent-hover));
      border-color:var(--accent);
      color:#fff;
    }
    .btn.primary:hover{
      box-shadow:0 4px 12px rgba(99, 102, 241, 0.4);
    }
    .btn.good{
      background:linear-gradient(135deg, #16a34a, #15803d);
      border-color:#16a34a;
      color:#fff;
    }
    .btn.warn{
      background:linear-gradient(135deg, #f59e0b, #d97706);
      border-color:#f59e0b;
      color:#fff;
    }
    .btn.danger{
      background:linear-gradient(135deg, #ef4444, #dc2626);
      border-color:#ef4444;
      color:#fff;
    }
    
    /* Pills/badges */
    .muted{color:var(--muted)}
    .small{font-size:13px}
    .pill{
      border:1px solid var(--border);
      border-radius:999px;
      padding:4px 12px;
      font-size:12px;
      display:inline-block;
      font-weight:500;
    }
    .pill.good{
      background:rgba(34, 197, 94, 0.1);
      border-color:rgba(34, 197, 94, 0.3);
      color:#22c55e;
    }
    .pill.warn{
      background:rgba(245, 158, 11, 0.1);
      border-color:rgba(245, 158, 11, 0.3);
      color:#f59e0b;
    }
    .pill.bad{
      background:rgba(239, 68, 68, 0.1);
      border-color:rgba(239, 68, 68, 0.3);
      color:#ef4444;
    }
    .pill.neutral{
      background:rgba(99, 102, 241, 0.1);
      border-color:rgba(99, 102, 241, 0.3);
      color:#6366f1;
    }
    
    /* Tables */
    .files table{
      width:100%;
      border-collapse:collapse;
      border-radius:12px;
      overflow:hidden;
    }
    .files th,.files td{
      border-bottom:1px solid var(--border);
      padding:10px 8px;
      text-align:left;
    }
    .files th{
      background:var(--bg-secondary);
      font-weight:600;
      font-size:13px;
      color:var(--muted);
      text-transform:uppercase;
      letter-spacing:0.5px;
    }
    .files tbody tr:hover{
      background:var(--card-hover);
    }
    .files td.size{
      width:140px;
      text-align:right;
      color:var(--muted);
    }
    
    /* Progress bars */
    .progress{
      background:var(--bg-secondary);
      border:1px solid var(--border);
      border-radius:999px;
      height:12px;
      overflow:hidden;
    }
    .progress > i{
      display:block;
      height:100%;
      background:linear-gradient(90deg, var(--accent), var(--accent-2));
      border-radius:999px;
      transition:width 0.3s ease;
    }
    
    /* Utilities */
    details summary{
      cursor:pointer;
      color:var(--muted);
      padding:8px 0;
    }
    details{margin-top:8px}
    code.kbd{
      font:12px ui-monospace, SFMono-Regular, Consolas, monospace;
      background:var(--bg-secondary);
      border:1px solid var(--border);
      padding:2px 8px;
      border-radius:6px;
      color:var(--accent);
    }
    
    /* Flash messages */
    .flash-message{
      padding:14px 18px;
      border-radius:12px;
      margin-bottom:16px;
      border-left:4px solid;
      animation:slideIn 0.3s ease;
    }
    .flash-message.error{
      background:rgba(239, 68, 68, 0.1);
      border-color:#ef4444;
      color:#fca5a5;
    }
    .flash-message.ok, .flash-message.success{
      background:rgba(34, 197, 94, 0.1);
      border-color:#22c55e;
      color:#86efac;
    }
    .flash-message.info{
      background:rgba(99, 102, 241, 0.1);
      border-color:#6366f1;
      color:#a5b4fc;
    }
    
    @keyframes slideIn {
      from { opacity:0; transform:translateY(-10px); }
      to { opacity:1; transform:translateY(0); }
    }
    
    /* Responsive */
    @media (max-width:768px) {
      header{padding:12px 16px}
      header h1{font-size:18px}
      .wrap{padding:0 12px; margin:16px auto}
      .card{padding:16px}
      .btn{padding:8px 12px; font-size:13px}
    }
  </style>
  {% block head %}{% endblock %}
</head>
<body>
  <header>
    <h1>ðŸš€ AllDebrid Proxy</h1>
    <nav>
      <a href="{{ url_for('index') }}">Home</a>
      <a href="{{ url_for('admin_page') }}">Admin</a>
      {% if current_user.is_authenticated %}
        <a href="{{ url_for('logout') }}">Logout</a>
      {% endif %}
    </nav>
  </header>

  <div class="wrap">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for cat, msg in messages %}
          <div class="flash-message {{ cat }}">
            {{ msg }}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </div>

  {% block scripts %}{% endblock %}
</body>
</html>
